(this.webpackJsonppart2_10=this.webpackJsonppart2_10||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),o=t(14),s=t.n(o),u=t(3),a=t(0),i=function(e){var n=e.searchValue,t=e.handleFilter;return Object(a.jsxs)("div",{children:["Filter shown with ",Object(a.jsx)("input",{value:n,onChange:t})]})},d=t(4),l=t.n(d),j="/api/persons",b=function(){return l.a.get(j).then((function(e){return e.data}))},f=function(e){return l.a.post(j,e).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},m=function(e,n){return l.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){var n=e.newName,t=e.setNewName,r=e.newNumber,c=e.persons,o=e.setPersons,s=e.handleInput,u=e.handleNumber,i=e.setNewNumber,d=e.setErrorMessage,l=e.setRedError;return Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s=!1;c.forEach((function(e){n===e.name&&(s=!0)}));var u={name:n,number:r};if(s){var a=c.find((function(e){return e.name===n})).id;window.confirm("".concat(n," already found, update nr?"))&&(m(a,u).then((function(e){o(c.map((function(n){return n.id!==e.id?n:e})))})).catch((function(e){console.log(e),d("".concat(n," was already removed from server")),l(!0),setTimeout((function(){d(null),l(!1)}),5e3)})),d("".concat(n," number updated!")),setTimeout((function(){d(null)}),5e3),i(""),t(""))}else console.log("onnistu"),f(u).then((function(e){o(c.concat(e)),d("".concat(u.name," created succesfully")),setTimeout((function(){d(null)}),5e3),t(""),i("")}))},children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:n,onChange:s})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:r,onChange:u})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.persons,t=e.setPersons,r=e.setErrorMessage;return Object(a.jsx)("div",{children:n.map((function(e){return Object(a.jsxs)("h3",{children:[e.name," ",e.number,Object(a.jsx)("button",{onClick:function(){return function(e){console.log(e);var c=e.id;window.confirm("Do you want to delete ".concat(e.name,"?"))&&h(c).then((function(o){t(n.filter((function(e){return e.id!==c}))),r("".concat(e.name," was deleted succesfully!")),setTimeout((function(){r(null)}),5e3)}))}(e)},children:"delete"})]},e.id)}))})},v=function(e){var n=e.message,t=e.redError;return null===n?null:null!=n&&!0===t?Object(a.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n}):Object(a.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},g=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),s=Object(u.a)(o,2),d=s[0],l=s[1],j=Object(r.useState)(""),f=Object(u.a)(j,2),h=f[0],m=f[1],g=Object(r.useState)(""),x=Object(u.a)(g,2),w=x[0],N=x[1],y=Object(r.useState)(null),S=Object(u.a)(y,2),E=S[0],k=S[1],C=Object(r.useState)(!1),M=Object(u.a)(C,2),P=M[0],R=M[1];Object(r.useEffect)((function(){b().then((function(e){c(e)}))}),[]);var T=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(v,{message:E,redError:P}),Object(a.jsx)(i,{searchValue:w,handleFilter:function(e){N(e.target.value)}}),Object(a.jsx)("div",{children:Object(a.jsx)("h2",{children:"Add person"})}),Object(a.jsx)(O,{newName:d,setNewNumber:m,setNewName:l,newNumber:h,handleInput:function(e){l(e.target.value)},handleNumber:function(e){m(e.target.value)},persons:t,setPersons:c,setErrorMessage:k,setRedError:R}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(p,{persons:T,setPersons:c,setErrorMessage:k})]})};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(g,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.21846500.chunk.js.map
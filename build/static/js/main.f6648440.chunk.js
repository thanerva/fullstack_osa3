(this.webpackJsonppart2_10=this.webpackJsonppart2_10||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),o=t(14),s=t.n(o),a=t(3),u=t(0),i=function(e){var n=e.searchValue,t=e.handleFilter;return Object(u.jsxs)("div",{children:["Filter shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})},l=t(4),d=t.n(l),j="/api/persons",b=function(){return d.a.get(j).then((function(e){return e.data}))},f=function(e){return d.a.post(j,e).then((function(e){return e.data}))},h=function(e){return d.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},m=function(e,n){return d.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){var n=e.newName,t=e.setNewName,r=e.newNumber,c=e.persons,o=e.setPersons,s=e.handleInput,a=e.handleNumber,i=e.setNewNumber,l=e.setErrorMessage,d=e.setRedError;return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s=!1;c.forEach((function(e){n===e.name&&(s=!0)}));var a={name:n,number:r};if(s){var u=c.find((function(e){return e.name===n})).id;return console.log(u),console.log(a),void(window.confirm("".concat(n," already found, update nr?"))&&(m(u,a).then((function(e){o(c.map((function(n){return n.id!==e.id?n:e})))})).catch((function(e){console.log(e),l("".concat(n," was already removed from server")),d(!0),setTimeout((function(){l(null),d(!1)}),5e3)})),l("".concat(n," number updated!")),setTimeout((function(){l(null)}),5e3),i(""),t("")))}console.log("onnistu"),f(a).then((function(e){o(c.concat(e)),l("".concat(a.name," created succesfully")),setTimeout((function(){l(null)}),5e3),t(""),i("")})).catch((function(e){console.log(e.response.data),l("".concat(e.response.data.error)),d(!0),setTimeout((function(){l(null),d(!1)}),5e3)}))},children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:s})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:r,onChange:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.persons,t=e.setPersons,r=e.setErrorMessage;return Object(u.jsx)("div",{children:n.map((function(e){return Object(u.jsxs)("h3",{children:[e.name," ",e.number,Object(u.jsx)("button",{onClick:function(){return function(e){console.log(e);var c=e.id;window.confirm("Do you want to delete ".concat(e.name,"?"))&&h(c).then((function(o){t(n.filter((function(e){return e.id!==c}))),r("".concat(e.name," was deleted succesfully!")),setTimeout((function(){r(null)}),5e3)}))}(e)},children:"delete"})]},e.id)}))})},p=function(e){var n=e.message,t=e.redError;return null===n?null:null!=n&&!0===t?Object(u.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n}):Object(u.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},v=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),s=Object(a.a)(o,2),l=s[0],d=s[1],j=Object(r.useState)(""),f=Object(a.a)(j,2),h=f[0],m=f[1],v=Object(r.useState)(""),x=Object(a.a)(v,2),w=x[0],N=x[1],y=Object(r.useState)(null),S=Object(a.a)(y,2),E=S[0],k=S[1],C=Object(r.useState)(!1),M=Object(a.a)(C,2),P=M[0],T=M[1];Object(r.useEffect)((function(){b().then((function(e){c(e)}))}),[]);var R=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(p,{message:E,redError:P}),Object(u.jsx)(i,{searchValue:w,handleFilter:function(e){N(e.target.value)}}),Object(u.jsx)("div",{children:Object(u.jsx)("h2",{children:"Add person"})}),Object(u.jsx)(O,{newName:l,setNewNumber:m,setNewName:d,newNumber:h,handleInput:function(e){d(e.target.value)},handleNumber:function(e){m(e.target.value)},persons:t,setPersons:c,setErrorMessage:k,setRedError:T}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(g,{persons:R,setPersons:c,setErrorMessage:k})]})};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(v,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.f6648440.chunk.js.map